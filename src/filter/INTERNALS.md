# `<pwc-filter>` â€” Internals

## Input lifecycle

- The search input is **always generated by the component**
- Creation is centralized in `_createInput()`
- Variants (e.g. Bootstrap) override input creation only, not filtering logic

The component never queries for existing inputs in the DOM.

---

## Debounce behavior

Debouncing is implemented as a simple instance-level timer:

- one timer per component instance
- shared across all key events
- configurable via attribute

This avoids per-handler state and keeps teardown unnecessary.

---

## Filtering engine

Filtering is implemented in two phases:

1. **Token resolution**
    - Each search token is resolved independently via XPath
    - Matching happens against text nodes only

2. **Row intersection**
    - Result sets are intersected (logical AND)
    - Only rows present in all token result sets remain visible

This keeps matching logic simple and predictable.

---

## XPath usage

XPath is used deliberately instead of query selectors:

- matches real rendered text, not attributes
- works across arbitrary nested markup
- avoids custom indexing or preprocessing

All XPath evaluation is scoped to the component root.

---

## Visibility handling

Rows are shown or hidden exclusively via the standard `hidden` attribute.

The component:
- does not add CSS
- does not mutate structure
- does not remove nodes
